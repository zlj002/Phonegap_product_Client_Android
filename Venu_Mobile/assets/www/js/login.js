var login={initialize:function(){this.bindEvents()},bindEvents:function(){this.bindLoginEvent()},login:function(e,n,a){var l={schoolID:e,loginID:n,password:a};var i=serverHost+"/MobileService/UserService/UserService.asmx/CheckLogin";$.ui.showMask("登录中……");$.ajax({type:"Post",contentType:"application/json; charset=utf-8",url:i,data:MY_JSON.stringify(l),dataType:"json",success:function(e){var n=MY_JSON.parse(e.d);if(n.ReturnFlag=="1"){setTimeout(function(){localMobelInfo.updateUser(n.User.ID);var e=[n.User.ID];window.plugins.xg.register(e,function(){},function(e){});localMobelInfo.updateUserType(n.User.UserType);localMobelInfo.updateName(n.User.UserName);localMobelInfo.saveUserInfo(MY_JSON.stringify(n.User));$.ui.hideMask();$.ui.loadContent("#pagemain",false,false,"left")},2e3)}else{$.ui.popup({title:"提示",message:"1--用户名或密码不正确<br>2--您选择的学校不正确",cancelText:"确定",cancelCallback:function(){},cancelOnly:true});$.ui.hideMask()}},error:function(e){$.ui.hideMask();$.ui.popup({title:"提示",message:"服务器地址"+serverHost+"异常，请检查配置",cancelText:"确定",cancelCallback:function(){},cancelOnly:true})}})},bindLoginEvent:function(){$("#btnLogin").unbind().bind("click",function(){var e=$("input[name='loginID']").val();var n=$("input[name='passWord']").val();if(e==""){$.ui.popup({title:"提示",message:"请输入用户名",cancelText:"确定",cancelCallback:function(){},cancelOnly:true});return false}if(n==""){$.ui.popup({title:"提示",message:"请输入密码",cancelText:"确定",cancelCallback:function(){},cancelOnly:true});return false}if(serverHost!=""){login.login(pmain.getSchoolInfo().ID,e,n)}else{$.ui.showMask("登录中……");if(e=="admin"&&n=="123"){setTimeout(function(){localMobelInfo.updateUser($("input[name='loginID']").val());localMobelInfo.updateUserType("0");localMobelInfo.updateName("管理员");$.ui.loadContent("#pagemain",false,false,"left");$.ui.hideMask()},2e3)}else if(e=="xs001"&&n=="123"){setTimeout(function(){localMobelInfo.updateUser($("input[name='loginID']").val());localMobelInfo.updateUserType("1");localMobelInfo.updateName("张小宝");$.ui.hideMask();$.ui.loadContent("#pagemain",false,false,"left")},2e3)}else{$.ui.popup({title:"提示",message:"用户名或密码不正确",cancelText:"确定",cancelCallback:function(){},cancelOnly:true});$.ui.hideMask();return false}}})}};