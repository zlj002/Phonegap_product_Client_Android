var facultyListPageIndex=1;var pSelectFaculty={initialize:function(){this.bindEvents()},getHotFaculty:function(){},bindData:function(t,a){var e=serverHost+"/MobileService/SchoolService/SchoolWebService.asmx/GetTopFacultyByName";$.ui.showMask("请稍等……");var l={schoolID:pmain.getSchoolInfo().ID,facultyName:t,pageIndex:a};$.ajax({type:"Post",contentType:"application/json; charset=utf-8",url:e,data:MY_JSON.stringify(l),dataType:"json",success:function(e){var l=MY_JSON.parse(e.d);if($("#ulFacultyList .liSelectHeader").length==0){var i=$("<li  class='liSelectHeader'>专业列表</li>");$("#ulFacultyList").append(i)}if(l.ReturnFlag==1&&l.List.length>0){$.each(l.List,function(t,a){var e=$("<li  class='liSelect'>"+a.Name+"</li>");e.unbind().on("tap",function(){localMobelInfo.saveFacultyInfo(MY_JSON.stringify(a));$.ui.goBack()});$("#ulFacultyList").append(e)});if(a<l.PageCount){var c=$("<li  class='liMore'>加载更多</li>");c.unbind().on("tap",function(){$("#ulFacultyList li:last ").remove();facultyListPageIndex++;pSelectFaculty.bindData(t,facultyListPageIndex)});$("#ulFacultyList").append(c)}}else{var i=$("<li  class='liSelect'>暂无结果</li>");$("#ulFacultyList").append(i)}$.ui.hideMask()},error:function(t,a,e){$.ui.hideMask();$.ui.popup({title:"提示",message:"获取数据出错",cancelText:"确定",cancelCallback:function(){},cancelOnly:true})}})},bindEvents:function(){$("#btnSearchFaculty").unbind().on("tap",function(){$("#ulFacultyList li").not(":first").remove();facultyListPageIndex=1;pSelectFaculty.bindData($("#textFacultySearch").val(),facultyListPageIndex)});$("#ulFacultyList li").remove();pSelectFaculty.bindData($("#textFacultySearch").val(),facultyListPageIndex)}};