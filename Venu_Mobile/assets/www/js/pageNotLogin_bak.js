var installListFromServer;var pageNotLogin={initialize:function(){var e=localMobelInfo.getSchoolServerHost();if(e==null||e==""){$.ui.loadContent("#pageSelectSchool",false,false,"left");return}else{if(MY_JSON.parse(e).LogoUrl){$("#imgSchoolLogo").attr("src",MY_JSON.parse(e).LogoUrl)}$("#divSchoolName").html(MY_JSON.parse(e).Name);$("#divSchoolEnglishName").html(MY_JSON.parse(e).EnglishName)}this.bindData()},bindData:function(){if(serverHost!=""){$.ui.showMask("正在加载……");var e={schoolID:pmain.getSchoolInfo().ID,userID:localMobelInfo.getUserName()};var o=serverHost+"/MobileService/UserService/UserService.asmx/GetSys_FeatureByCurrentUser";$.ajax({type:"Post",contentType:"application/json; charset=utf-8",url:o,data:MY_JSON.stringify(e),dataType:"json",success:function(e){var o=MY_JSON.parse(e.d);installListFromServer=o.List;pageNotLogin.initApps();$.ui.hideMask()},error:function(e){$.ui.hideMask();$.ui.popup({title:"提示",message:"服务器地址"+serverHost+"异常，请检查配置",cancelText:"确定",cancelCallback:function(){},cancelOnly:true})}})}else{installListFromServer=installAppList;pageNotLogin.initApps()}},initApps:function(){$("#mySwipe .swipe-wrap").html("");$("#notLoginPosition").html("");var e="myNewMessageRed46";$.each(installListFromServer,function(e,o){if($(".swipe-wrap .col3").length%6==0){var t=$('<div><div class="grid"></div></div>');$("#mySwipe .swipe-wrap").append(t);var n=$("<em >&bull;</em>");$("#notLoginPosition").append(n)}var i=$('<div class="col3" style="padding-left:0px;"><a  thirdpartyurl="'+o.FeatureUrl+'" topanelid="#'+o.FeatureID+'" ><img src="'+o.FeatureIcon+'" width="64" height="64" /><br /><font class="featureFont">'+o.FeatureName+"</font></a></div>");$("#mySwipe .swipe-wrap .grid:last").append(i)});$("#notLoginPosition em:first").addClass("on");pageNotLogin.initLeftRightTab();pageNotLogin.bindEvents()},bindEvents:function(){$("#btnToLogin").unbind().on("click",function(){$.ui.loadContent("#login",false,false,"left")});$.each($(".swipe-wrap .col3"),function(e,o){var t=$(o).find("a").attr("topanelid");var n=$(o).find("a").attr("thirdpartyurl");var i=encodeURIComponent($(o).find("[class=featureFont]").html());$(o).unbind().on("click",function(){if(n==null||typeof n=="undefined"||n=="null"||n==""){$.ui.loadContent(t,false,false,"left")}else{if(n.indexOf("?")>-1){n=n+"&vUserNO="+localMobelInfo.getUserName()+"&vUserType="+localMobelInfo.getUserType()+"&vSchoolID="+pmain.getSchoolInfo().ID+"&vTitle="+i}else{n=n+"?vUserNO="+localMobelInfo.getUserName()+"&vUserType="+localMobelInfo.getUserType()+"&vSchoolID="+pmain.getSchoolInfo().ID+"&vTitle="+i}var e=window.open(n,"_blank","clearcache=yes")}})})},initLeftRightTab:function(){var e=document.getElementById("notLoginPosition").getElementsByTagName("em");var o=document.getElementById("mySwipe");window.sw=new Swipe(o,{startSlide:0,speed:400,continuous:true,disableScroll:false,stopPropagation:false,callback:function(e,o){$.each($("#notLoginPosition em"),function(o,t){if(e==o){$(t).addClass("on")}else{$(t).removeClass("on")}})},transitionEnd:function(e,o){}})}};