var pSafe={initialize:function(){this.initEvents();this.bindData()},initEvents:function(){$("#btnApplyResetpassword").unbind().on("click",function(){$.ui.popup({title:"提示",message:"确定本次操作？",cancelText:"取消",cancelCallback:function(){},doneText:"确定",doneCallback:function(){var e=serverHost+"/MobileService/UserService/UserService.asmx/GenResetPasswordMobileCode";$.ui.showMask("请稍等……");var a={schoolID:pmain.getSchoolInfo().ID,mobileNumber:pmain.getUserInfo().MobileNumber};$.ajax({type:"Post",contentType:"application/json; charset=utf-8",url:e,data:MY_JSON.stringify(a),dataType:"json",success:function(e){var a=MY_JSON.parse(e.d);if(a.ReturnFlag==1){$.ui.loadContent("#pageResetPasswordValidateCode",false,false,"left")}else{$.ui.popup({title:"提示",message:a.ReturnMessage,cancelText:"确定",cancelCallback:function(){},cancelOnly:true})}$.ui.hideMask()},error:function(e,a,n){$.ui.hideMask();$.ui.popup({title:"提示",message:"获取数据出错",cancelText:"确定",cancelCallback:function(){},cancelOnly:true})}})},cancelOnly:false})})},bindData:function(){if(serverHost!=""){var e=serverHost+"/MobileService/UserService/UserService.asmx/GetUserInfoByUserID";$.ui.showMask("正在加载……");var a={userID:localMobelInfo.getUserName()};$.ajax({type:"Post",contentType:"application/json; charset=utf-8",url:e,data:MY_JSON.stringify(a),dataType:"json",success:function(e){var a=MY_JSON.parse(e.d);if(a.ReturnFlag=="1"){$("#spanCurrentPhone").html(a.Entity.MobileNumber);$.ui.hideMask()}else{$.ui.hideMask()}},error:function(e){$.ui.hideMask();$.ui.popup({title:"提示",message:"获个人安全信息出错",cancelText:"确定",cancelCallback:function(){},cancelOnly:true})}})}}};