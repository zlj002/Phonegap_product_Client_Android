var schooListPageIndex=1;var pSelectSchool={initialize:function(){this.getHotSchool();this.bindEvents()},getHotSchool:function(){var e=serverHost+"/MobileService/SchoolService/SchoolWebService.asmx/GetHotSchool";$.ui.showMask("请稍等……");var i={};$.ajax({type:"Post",contentType:"application/json; charset=utf-8",url:e,data:MY_JSON.stringify(i),dataType:"json",success:function(e){var i=MY_JSON.parse(e.d);$("#ulSchooList .liSelectHeader").html("热门学校");$("#ulSchooList li").not(":first").remove();if(i.ReturnFlag==1&&i.List.length>0){$.each(i.List,function(e,i){var o=$("<li class='liSelect'>"+i.Name+"</li>");o.unbind().on("tap",function(){$("#btnToLeft").css("visibility","visible");localMobelInfo.saveSchoolServerHost(MY_JSON.stringify(i));app.initTheme();$.ui.goBack()});$("#ulSchooList").append(o)})}else{var o=$("<li  class='liSelect'>暂无结果</li>");$("#ulSchooList").append(o)}$.ui.hideMask()},error:function(e,i,o){$.ui.hideMask();$.ui.popup({title:"提示",message:"获取数据出错",cancelText:"确定",cancelCallback:function(){},cancelOnly:true})}})},bindData:function(e,i){var o=serverHost+"/MobileService/SchoolService/SchoolWebService.asmx/GetTopSchoolByName";$.ui.showMask("请稍等……");var t={schoolName:e,pageIndex:i};$.ajax({type:"Post",contentType:"application/json; charset=utf-8",url:o,data:MY_JSON.stringify(t),dataType:"json",success:function(o){var t=MY_JSON.parse(o.d);$("#ulSchooList .liSelectHeader").html("以下是搜索结果");if(t.ReturnFlag==1&&t.List.length>0){$.each(t.List,function(e,i){var o=$("<li  class='liSelect'>"+i.Name+"</li>");o.unbind().on("tap",function(){$("#btnToLeft").css("visibility","visible");localMobelInfo.saveSchoolServerHost(MY_JSON.stringify(i));app.initTheme();$.ui.goBack()});$("#ulSchooList").append(o)});if(i<t.PageCount){var a=$("<li  class='liMore'>加载更多</li>");a.unbind().on("tap",function(){$("#ulSchooList li:last ").remove();schooListPageIndex++;pSelectSchool.bindData(e,schooListPageIndex)});$("#ulSchooList").append(a)}}else{var c=$("<li  class='liSelect'>暂无结果</li>");$("#ulSchooList").append(c)}$.ui.hideMask()},error:function(e,i,o){$.ui.hideMask();$.ui.popup({title:"提示",message:"获取数据出错",cancelText:"确定",cancelCallback:function(){},cancelOnly:true})}})},bindEvents:function(){$("#btnSearchSchool").unbind().on("tap",function(){$("#ulSchooList li").not(":first").remove();schooListPageIndex=1;pSelectSchool.bindData($("#textSchoolSearch").val(),schooListPageIndex)})}};